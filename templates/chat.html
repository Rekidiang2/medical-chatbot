
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
	<title>Medical Chatbot</title>
	<!-- Bootstrap 5 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css')}}"/>

</head>
<body>
	<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center" style="background: linear-gradient(120deg, #2a3c4a 0%, #3a4250 100%);">
		<div class="col-12 col-md-8 col-lg-6 col-xl-8">

                <div><h5 class="text-white text-center">Chat with our Medical Bot</h5></div>
			<div class="card shadow-lg border-0" style="border-radius: 1.5rem;">

				<div class="card-header bg-primary text-white d-flex align-items-center" style="border-radius: 1.5rem 1.5rem 0 0;">
					<img src="https://cdn-icons-png.flaticon.com/512/387/387569.png" alt="Bot Avatar" class="rounded-circle me-3" style="width: 56px; height: 56px; border: 2px solid #fff; background: #fff;">
					<div>
						<h5 class="mb-0">Medical Chatbot</h5>
						<small class="text-light">Ask me anything!</small>
					</div>
				</div>
				<div id="messageFormeight" class="card-body msg_card_body px-3 py-4" style="background: #f8fafd; min-height: 350px; max-height: 600px; overflow-y: auto;">
					<!-- Messages will appear here -->
				</div>
				<div class="card-footer bg-white" style="border-radius: 0 0 1.5rem 1.5rem;">
					<form id="messageArea" class="input-group">
						<input type="text" id="text" name="msg" placeholder="Type your message..." autocomplete="off" class="form-control type_msg border-0 shadow-none" required style="background: #f0f2f5;">
						<button type="submit" id="send" class="btn btn-primary ms-2 px-4"><i class="fas fa-paper-plane"></i></button>
					</form>
				</div>
			</div>
			<div class="text-center mt-3 text-white">By Kiese D. Reagan</div>
		</div>
       
	</div>
	<!-- jQuery and Bootstrap Bundle (includes Popper) -->
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		$(document).ready(function() {
			$('#messageArea').on('submit', function(event) {
				event.preventDefault();
				const date = new Date();
				const hour = String(date.getHours()).padStart(2, '0');
				const minute = String(date.getMinutes()).padStart(2, '0');
				const str_time = hour + ":" + minute;
				var rawText = $('#text').val();
				if (!rawText.trim()) return;

				var userHtml = `
					<div class="d-flex justify-content-end mb-3">
						<div class="msg_cotainer_send position-relative">${rawText}
							<div class="w-100 text-end"><span class="msg_time_send d-block mt-1">${str_time}</span></div>
						</div>
						<div class="img_cont_msg ms-2"><img src="https://i.ibb.co/d5b84Xw/Untitled-design.png" class="rounded-circle user_img_msg" alt="User"></div>
					</div>
				`;
				$('#text').val("");
				$('#messageFormeight').append(userHtml);
				$('#messageFormeight').scrollTop($('#messageFormeight')[0].scrollHeight);

				$.ajax({
					data: { msg: rawText },
					type: 'POST',
					url: '/get',
				}).done(function(data) {
					var botHtml = `
						<div class="d-flex justify-content-start mb-3">
							<div class="img_cont_msg me-2"><img src="https://cdn-icons-png.flaticon.com/512/387/387569.png" class="rounded-circle user_img_msg" alt="Bot"></div>
							<div class="msg_cotainer position-relative">${data}
								<div class="w-100 text-start"><span class="msg_time d-block mt-1">${str_time}</span></div>
							</div>
						</div>
					`;
					$('#messageFormeight').append(botHtml);
					$('#messageFormeight').scrollTop($('#messageFormeight')[0].scrollHeight);
				});
			});
		});
	</script>
</body>
</html>